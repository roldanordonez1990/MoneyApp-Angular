<div><app-navigation-header></app-navigation-header></div>

    <div class="container w-100 p-0">
        <div class="row mt-4">
            <div class="col-sm-8">
                <h3 class="text-center tipoLetra">Historial de gastos de {{usuarios['username']}}</h3>
                <div> 
                    <ng-container *ngIf="!(listadoCometidos.length == 0); else elseBlock">
                    <table mat-table [dataSource]="dataSourceTabla"> 
                      <ng-container matColumnDef="Gasto"> 
                        <th mat-header-cell *matHeaderCellDef class="text-center">Gasto</th> 
                        <td mat-cell *matCellDef="let cometido" class="text-center">{{cometido.gasto}}</td> 
                      </ng-container> 
                      <ng-container matColumnDef="Categoria"> 
                        <th mat-header-cell *matHeaderCellDef class="text-center">Categoría</th> 
                        <td mat-cell *matCellDef="let cometido" class="text-center">{{cometido.categoria}}</td> 
                      </ng-container> 
                      <ng-container matColumnDef="Lugar"> 
                        <th mat-header-cell *matHeaderCellDef class="text-center">Lugar</th> 
                        <td mat-cell *matCellDef="let cometido" class="text-center">{{cometido.lugar['nombre']}}</td> 
                      </ng-container> 
                      <ng-container matColumnDef="Fecha">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Fecha</th> 
                        <td mat-cell *matCellDef="let cometido" class="text-center">{{cometido.fecha | date:'dd/MM/yy HH:mm:ss a'}}</td> 
                      </ng-container> 
                      <ng-container matColumnDef="Cuenta">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Cuenta</th> 
                        <td mat-cell *matCellDef="let cometido" class="text-center">{{cometido.id_cuenta['num_cuenta']}}</td> 
                      </ng-container> 
                      <ng-container matColumnDef="Comision">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Comisión</th> 
                        <td mat-cell *matCellDef="let cometido" class="text-center">{{cometido.comision | number : "1.2-2"}}€</td> 
                      </ng-container> 
                      <ng-container matColumnDef="Eliminar" class="text-center">
                        <th mat-header-cell *matHeaderCellDef class="text-center">Eliminar</th> 
                        <td mat-cell *matCellDef="let cometido" class="text-center"><button mat-icon-button color="primary" aria-label="Example icon button with a menu icon" [value]="cometido.idcometido" formControlName="idcometido" (click)="deleteCometidos(cometido.idcometido)"> 
                            <mat-icon class="colorButtonDelete" >delete</mat-icon>
                        </button></td> 
                      </ng-container> 
                      
                      <tr mat-header-row *matHeaderRowDef="columnas"></tr>
                        <tr mat-row *matRowDef="let cometido; columns: columnas;"></tr>
                    </table> 
                    </ng-container>
                  </div>
                  <ng-template #elseBlock>
                    <p class="text-center text-danger mat-body-2">No existen resultados</p>
                </ng-template>
            </div>
            <div class="col-sm-4">
                <app-form-transaction></app-form-transaction>
            </div>
        </div>
    </div>